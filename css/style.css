/* =============================================================================
   RF401 Contract Timeline — Premium Dark Theme
   SixOneFive Real Estate Advisors
   ============================================================================= */

/* ---------------------------------------------------------------------------
   1. CSS Custom Properties (Brand + Surface Tokens)
   --------------------------------------------------------------------------- */
:root {
    /* Brand palette */
    --rf-gold: #d2b56c;
    --rf-gold-light: #feee9f;
    --rf-gold-dark: #b18841;
    --rf-black: #231f20;
    --rf-gold-gradient: linear-gradient(135deg, #c9a84c, #d2b56c, #b18841);

    /* Surface system */
    --rf-bg: #131316;
    --rf-bg-card: #1c1c21;
    --rf-bg-elevated: #242429;
    --rf-bg-hover: #2a2a30;
    --rf-bg-input: #1a1a1f;

    /* Borders */
    --rf-border: #2e2e35;
    --rf-border-light: #3a3a42;
    --rf-border-focus: rgba(210, 181, 108, 0.5);

    /* Text */
    --rf-text: #e4e4e9;
    --rf-text-secondary: #9d9da5;
    --rf-text-muted: #636369;

    /* Semantic */
    --rf-success: #34d399;
    --rf-warning: #fbbf24;
    --rf-danger: #f87171;
    --rf-info: #60a5fa;

    /* Typography */
    --rf-font: Futura, "Trebuchet MS", "Segoe UI", system-ui, -apple-system, sans-serif;
    --rf-font-mono: "SF Mono", "Cascadia Code", "Fira Code", monospace;

    /* Spacing */
    --rf-radius: 10px;
    --rf-radius-sm: 6px;
}

/* ---------------------------------------------------------------------------
   2. Pico CSS Dark Theme Overrides
   --------------------------------------------------------------------------- */
[data-theme="dark"] {
    --pico-background-color: var(--rf-bg);
    --pico-card-background-color: var(--rf-bg-card);
    --pico-card-border-color: var(--rf-border);
    --pico-card-sectioning-background-color: var(--rf-bg-elevated);
    --pico-color: var(--rf-text);
    --pico-muted-color: var(--rf-text-secondary);
    --pico-muted-border-color: var(--rf-border);
    --pico-primary: var(--rf-gold);
    --pico-primary-hover: var(--rf-gold-light);
    --pico-primary-focus: var(--rf-border-focus);
    --pico-primary-inverse: var(--rf-black);
    --pico-secondary: var(--rf-text-secondary);
    --pico-secondary-hover: var(--rf-text);
    --pico-font-family: var(--rf-font);
    --pico-border-radius: var(--rf-radius);
    --pico-form-element-background-color: var(--rf-bg-input);
    --pico-form-element-border-color: var(--rf-border);
    --pico-form-element-focus-color: var(--rf-gold);
    --pico-table-border-color: var(--rf-border);
    --pico-table-row-stripped-background-color: rgba(255, 255, 255, 0.02);
    --pico-ins-color: var(--rf-success);
    --pico-del-color: var(--rf-danger);
    --pico-mark-color: var(--rf-black);
    --pico-mark-background-color: rgba(210, 181, 108, 0.3);
    --pico-code-background-color: var(--rf-bg-elevated);
    --pico-code-color: var(--rf-gold);
    color-scheme: dark;
}

/* ---------------------------------------------------------------------------
   3. Base Typography
   --------------------------------------------------------------------------- */
body {
    font-family: var(--rf-font);
    background: var(--rf-bg);
    color: var(--rf-text);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

h1, h2, h3, h4, h5, h6 {
    letter-spacing: -0.02em;
    font-weight: 600;
}

h1 { font-size: 1.75rem; color: var(--rf-text); }
h2 { font-size: 1.35rem; }
h3 { font-size: 1.1rem; }

hgroup > p, hgroup > h2 {
    color: var(--rf-text-secondary);
}

a { color: var(--rf-gold); text-decoration: none; }
a:hover { color: var(--rf-gold-light); }

small { color: var(--rf-text-muted); }

/* ---------------------------------------------------------------------------
   4. Navigation / Brand Bar
   --------------------------------------------------------------------------- */
.brand-nav {
    background: var(--rf-bg-card);
    border-bottom: 1px solid var(--rf-border);
    padding: 0.65rem 1.5rem;
    margin-bottom: 0;
}

.brand-nav nav {
    display: flex;
    align-items: center;
    justify-content: space-between;
    max-width: 1200px;
    margin: 0 auto;
}

.brand-nav .brand-logo {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: 700;
    font-size: 1rem;
    color: var(--rf-gold);
    text-decoration: none;
    letter-spacing: -0.01em;
}

.brand-nav .brand-logo span.brand-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 28px;
    background: var(--rf-gold-gradient);
    color: var(--rf-black);
    border-radius: 6px;
    font-weight: 800;
    font-size: 0.7rem;
    letter-spacing: 0.05em;
}

.nav-inner {
    display: flex;
    align-items: center;
    justify-content: space-between;
    max-width: 1200px;
    margin: 0 auto;
}

.brand-link {
    display: flex;
    align-items: center;
    gap: 0.6rem;
    text-decoration: none;
    color: var(--rf-gold);
    font-weight: 700;
    font-size: 1rem;
    letter-spacing: -0.01em;
}

.brand-link:hover {
    color: var(--rf-gold-light);
}

.brand-logo-img {
    width: 36px;
    height: 36px;
    border-radius: 6px;
    object-fit: cover;
}

/* ---- Hero logo (index page) ---- */
.hero-logo {
    text-align: center;
    padding: 2rem 0 0.5rem;
}

.hero-logo-img {
    max-width: 360px;
    width: 100%;
    height: auto;
    border-radius: 12px;
    filter: drop-shadow(0 4px 24px rgba(212, 175, 55, 0.15));
}

@media (max-width: 576px) {
    .hero-logo-img {
        max-width: 260px;
    }
    .hero-logo {
        padding: 1.5rem 0 0.25rem;
    }
}

.brand-name {
    color: var(--rf-gold);
    font-weight: 700;
}

.brand-divider {
    color: var(--rf-text-muted);
    font-weight: 300;
    margin: 0 0.05rem;
}

.brand-product {
    color: var(--rf-text-secondary);
    font-weight: 500;
}

.brand-nav .nav-right {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.brand-nav .nav-link {
    color: var(--rf-text-secondary);
    font-size: 0.875rem;
    text-decoration: none;
    padding: 0.25rem 0;
    border-bottom: 2px solid transparent;
    transition: color 0.15s, border-color 0.15s;
}

.brand-nav .nav-link:hover,
.brand-nav .nav-link.active {
    color: var(--rf-text);
    border-bottom-color: var(--rf-gold);
}

/* User info in nav */
.nav-user {
    color: var(--rf-gold);
    font-size: 0.825rem;
    font-weight: 600;
    letter-spacing: 0.02em;
}

.nav-logout-btn {
    background: none;
    border: none;
    cursor: pointer;
    font-family: var(--rf-font);
    font-size: 0.875rem;
    padding: 0.25rem 0;
    border-bottom: 2px solid transparent;
    color: var(--rf-text-secondary);
    transition: color 0.15s, border-color 0.15s;
}

.nav-logout-btn:hover {
    color: var(--rf-danger);
    border-bottom-color: var(--rf-danger);
}

/* Mock mode badge */
.mock-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.3rem;
    font-size: 0.7rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--rf-gold);
    border: 1px solid var(--rf-gold);
    border-radius: 20px;
    padding: 0.15rem 0.6rem;
    opacity: 0.8;
}

.mock-badge::before {
    content: "";
    display: inline-block;
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: var(--rf-gold);
}

/* ---------------------------------------------------------------------------
   5. Main Content Area
   --------------------------------------------------------------------------- */
main.container {
    max-width: 1100px;
    padding-top: 2rem;
    padding-bottom: 3rem;
}

/* ---------------------------------------------------------------------------
   6. Cards / Articles
   --------------------------------------------------------------------------- */
article {
    background: var(--rf-bg-card);
    border: 1px solid var(--rf-border);
    border-radius: var(--rf-radius);
    padding: 1.25rem 1.5rem;
    margin-bottom: 1rem;
    transition: border-color 0.2s, box-shadow 0.2s;
}

article header {
    padding-bottom: 0.75rem;
    margin-bottom: 0.75rem;
    border-bottom: 1px solid var(--rf-border);
}

article footer {
    padding-top: 0.75rem;
    margin-top: 0.75rem;
    border-top: 1px solid var(--rf-border);
    color: var(--rf-text-muted);
    font-size: 0.8rem;
}

/* Clickable deal cards */
.deal-card {
    cursor: pointer;
    text-decoration: none;
    display: block;
    color: inherit;
}

.deal-card:hover {
    border-color: var(--rf-gold);
    box-shadow: 0 0 0 1px rgba(210, 181, 108, 0.15);
}

.deal-card-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 1rem;
    margin-bottom: 0.5rem;
}

.deal-card-header h3 {
    margin: 0;
    font-size: 1.05rem;
}

.deal-card-meta {
    display: flex;
    gap: 1.25rem;
    font-size: 0.8rem;
    color: var(--rf-text-muted);
}

.deal-card-meta span {
    display: inline-flex;
    align-items: center;
    gap: 0.3rem;
}

/* Deal detail header */
.deal-header {
    margin-bottom: 1.5rem;
}

.deal-header hgroup {
    margin-bottom: 0.75rem;
}

.deal-header hgroup h1 {
    margin-bottom: 0.15rem;
}

.deal-header hgroup p {
    color: var(--rf-text-secondary);
    margin: 0;
}

.deal-meta-grid {
    display: flex;
    gap: 2rem;
    flex-wrap: wrap;
    font-size: 0.85rem;
    color: var(--rf-text-secondary);
}

.deal-meta-grid dt {
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--rf-text-muted);
    margin-bottom: 0.15rem;
}

.deal-meta-grid dd {
    margin: 0 0 0.5rem 0;
    color: var(--rf-text);
}

/* ---------------------------------------------------------------------------
   7. Tab Navigation
   --------------------------------------------------------------------------- */
.tab-nav {
    display: flex;
    gap: 0;
    border-bottom: 1px solid var(--rf-border);
    margin-bottom: 1.5rem;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
}

.tab-btn {
    background: none;
    border: none;
    border-bottom: 2px solid transparent;
    color: var(--rf-text-secondary);
    font-family: var(--rf-font);
    font-size: 0.85rem;
    font-weight: 500;
    padding: 0.65rem 1rem;
    cursor: pointer;
    white-space: nowrap;
    transition: color 0.15s, border-color 0.15s;
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
}

.tab-btn:hover {
    color: var(--rf-text);
}

.tab-btn.active {
    color: var(--rf-gold);
    border-bottom-color: var(--rf-gold);
}

.tab-content {
    min-height: 200px;
}

/* Tab count badges */
.tab-badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 18px;
    height: 18px;
    font-size: 0.7rem;
    font-weight: 600;
    background: var(--rf-bg-elevated);
    color: var(--rf-text-muted);
    border-radius: 9px;
    padding: 0 5px;
}

.tab-btn.active .tab-badge {
    background: rgba(210, 181, 108, 0.15);
    color: var(--rf-gold);
}

.tab-badge.danger {
    background: rgba(248, 113, 113, 0.15);
    color: var(--rf-danger);
}

/* ---------------------------------------------------------------------------
   8. Tables
   --------------------------------------------------------------------------- */
table {
    width: 100%;
    border-collapse: collapse;
}

table thead th {
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    color: var(--rf-text-muted);
    border-bottom: 1px solid var(--rf-border);
    padding: 0.6rem 0.75rem;
    text-align: left;
}

table tbody td {
    padding: 0.7rem 0.75rem;
    border-bottom: 1px solid var(--rf-border);
    font-size: 0.875rem;
    vertical-align: top;
}

table tbody tr:last-child td {
    border-bottom: none;
}

table tbody tr:hover {
    background: var(--rf-bg-hover);
}

.conflict-row {
    background: rgba(248, 113, 113, 0.06) !important;
}

.conflict-row:hover {
    background: rgba(248, 113, 113, 0.1) !important;
}

/* ---------------------------------------------------------------------------
   9. Status Pills / Badges
   --------------------------------------------------------------------------- */
.pill {
    display: inline-flex;
    align-items: center;
    font-size: 0.7rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    padding: 0.15rem 0.55rem;
    border-radius: 20px;
    line-height: 1.4;
}

.pill-active {
    background: rgba(52, 211, 153, 0.12);
    color: var(--rf-success);
}

.pill-closed {
    background: rgba(157, 157, 165, 0.12);
    color: var(--rf-text-secondary);
}

.pill-cancelled {
    background: rgba(248, 113, 113, 0.12);
    color: var(--rf-danger);
}

/* Event type badges */
.event-type {
    display: inline-block;
    font-size: 0.7rem;
    font-weight: 600;
    padding: 0.1rem 0.5rem;
    border-radius: 4px;
    text-transform: capitalize;
}

.event-type-deadline { background: rgba(248, 113, 113, 0.12); color: var(--rf-danger); }
.event-type-milestone { background: rgba(210, 181, 108, 0.12); color: var(--rf-gold); }
.event-type-conflict { background: rgba(248, 113, 113, 0.2); color: var(--rf-danger); }
.event-type-info { background: rgba(96, 165, 250, 0.12); color: var(--rf-info); }

/* ---------------------------------------------------------------------------
   10. Confidence Badges
   --------------------------------------------------------------------------- */
.confidence-high { color: var(--rf-success); font-weight: 600; }
.confidence-medium { color: var(--rf-warning); font-weight: 600; }
.confidence-low { color: var(--rf-danger); font-weight: 600; }

/* ---------------------------------------------------------------------------
   11. Flag Severity Cards
   --------------------------------------------------------------------------- */
.flag-card {
    border-left: 3px solid var(--rf-border);
    padding-left: 1rem;
}

.flag-error { border-left-color: var(--rf-danger); }
.flag-warning { border-left-color: var(--rf-warning); }
.flag-info { border-left-color: var(--rf-info); }
.flag-success { border-left-color: var(--rf-success); }

/* ---------------------------------------------------------------------------
   12. Task Items
   --------------------------------------------------------------------------- */
.task-item {
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    padding: 0.75rem 0;
    border-bottom: 1px solid var(--rf-border);
}

.task-item:last-child { border-bottom: none; }

.task-item.task-done {
    opacity: 0.5;
}

.task-item.task-done .task-title {
    text-decoration: line-through;
}

.task-status-btn {
    flex-shrink: 0;
    width: 22px;
    height: 22px;
    border-radius: 50%;
    border: 2px solid var(--rf-border-light);
    background: none;
    cursor: pointer;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: border-color 0.15s, background 0.15s;
    margin-top: 2px;
    font-size: 0;
}

.task-status-btn:hover {
    border-color: var(--rf-gold);
}

.task-status-btn.status-doing {
    border-color: var(--rf-warning);
    background: rgba(251, 191, 36, 0.2);
}

.task-status-btn.status-done {
    border-color: var(--rf-success);
    background: var(--rf-success);
}

.task-status-btn.status-done::after {
    content: "\2713";
    font-size: 12px;
    color: var(--rf-bg);
    font-weight: 700;
}

.task-body {
    flex: 1;
    min-width: 0;
}

.task-title {
    font-weight: 500;
    font-size: 0.9rem;
}

.task-due {
    font-size: 0.8rem;
    color: var(--rf-text-muted);
    margin-left: 0.5rem;
}

.task-adjusted {
    font-size: 0.75rem;
    color: var(--rf-warning);
}

.task-desc {
    font-size: 0.825rem;
    color: var(--rf-text-secondary);
    margin: 0.25rem 0 0;
}

.task-category-label {
    font-size: 0.7rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--rf-gold);
    padding: 1rem 0 0.4rem;
    border-bottom: 1px solid var(--rf-border);
    margin-bottom: 0;
}

/* ---------------------------------------------------------------------------
   13. Question Cards
   --------------------------------------------------------------------------- */
.question-card {
    margin-bottom: 1rem;
}

.question-card.answered {
    opacity: 0.5;
}

.question-prompt {
    font-weight: 500;
    margin-bottom: 0.25rem;
}

.question-context {
    font-size: 0.825rem;
    color: var(--rf-text-secondary);
    margin-bottom: 0.75rem;
}

.question-form {
    display: flex;
    gap: 0.5rem;
    align-items: flex-end;
}

.question-form select,
.question-form input {
    flex: 1;
    margin-bottom: 0;
}

.question-form button {
    flex-shrink: 0;
    margin-bottom: 0;
}

/* ---------------------------------------------------------------------------
   15. Source Quotes
   --------------------------------------------------------------------------- */
.source-ref {
    font-size: 0.8rem;
    color: var(--rf-text-muted);
}

.source-ref details summary {
    cursor: pointer;
    font-size: 0.75rem;
    color: var(--rf-text-muted);
}

.source-ref details summary:hover {
    color: var(--rf-gold);
}

.source-quote {
    font-family: var(--rf-font-mono);
    font-size: 0.78rem;
    color: var(--rf-text-secondary);
    background: var(--rf-bg-elevated);
    border-left: 2px solid var(--rf-gold-dark);
    padding: 0.4rem 0.6rem;
    border-radius: 0 4px 4px 0;
    margin-top: 0.35rem;
    line-height: 1.5;
    word-break: break-word;
}

.page-ref {
    font-size: 0.7rem;
    color: var(--rf-text-muted);
    font-weight: 600;
}

/* ---------------------------------------------------------------------------
   16. Buttons
   --------------------------------------------------------------------------- */
.btn-gold {
    background: var(--rf-gold-gradient);
    color: var(--rf-black);
    font-weight: 600;
    border: none;
    border-radius: var(--rf-radius-sm);
    padding: 0.5rem 1.25rem;
    cursor: pointer;
    font-family: var(--rf-font);
    font-size: 0.875rem;
    transition: filter 0.15s, transform 0.1s;
}

.btn-gold:hover {
    filter: brightness(1.1);
    transform: translateY(-1px);
}

.btn-gold:active {
    transform: translateY(0);
}

.btn-sm {
    font-size: 0.78rem;
    padding: 0.3rem 0.8rem;
}

.btn-outline {
    background: transparent;
    color: var(--rf-text-secondary);
    border: 1px solid var(--rf-border-light);
    border-radius: var(--rf-radius-sm);
    padding: 0.35rem 0.85rem;
    font-size: 0.8rem;
    font-weight: 500;
    cursor: pointer;
    font-family: var(--rf-font);
    transition: border-color 0.15s, color 0.15s;
}

.btn-outline:hover {
    border-color: var(--rf-gold);
    color: var(--rf-gold);
}

/* ---------------------------------------------------------------------------
   17. Create Deal Form
   --------------------------------------------------------------------------- */
.create-deal-toggle {
    margin-bottom: 1.5rem;
}

.create-deal-toggle summary {
    list-style: none;
    cursor: pointer;
}

.create-deal-toggle summary::-webkit-details-marker { display: none; }

.create-deal-form {
    padding: 1.25rem 1.5rem;
    background: var(--rf-bg-card);
    border: 1px solid var(--rf-border);
    border-radius: var(--rf-radius);
    margin-top: 0.75rem;
}

.form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0.75rem;
}

/* ---------------------------------------------------------------------------
   18. Empty States
   --------------------------------------------------------------------------- */
.empty-state {
    text-align: center;
    padding: 3rem 2rem;
    color: var(--rf-text-muted);
    border: 1px dashed var(--rf-border);
    background: transparent;
}

.empty-state p {
    font-size: 0.9rem;
    margin: 0;
}

.empty-icon {
    font-size: 2rem;
    margin-bottom: 0.75rem;
    opacity: 0.4;
}

/* ---------------------------------------------------------------------------
   19. Toast Notifications
   --------------------------------------------------------------------------- */
.toast {
    position: fixed;
    bottom: 1.5rem;
    right: 1.5rem;
    max-width: 400px;
    padding: 0.75rem 1.25rem;
    border-radius: var(--rf-radius-sm);
    font-size: 0.85rem;
    font-weight: 500;
    color: var(--rf-text);
    background: var(--rf-bg-elevated);
    border: 1px solid var(--rf-border);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
    z-index: 9999;
    animation: toast-in 0.3s ease-out;
}

.toast-success { border-left: 3px solid var(--rf-success); }
.toast-warning { border-left: 3px solid var(--rf-warning); }
.toast-error { border-left: 3px solid var(--rf-danger); }

@keyframes toast-in {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

.loading-spinner {
    display: inline-block;
    width: 16px;
    height: 16px;
    border: 2px solid var(--rf-border);
    border-top-color: var(--rf-gold);
    border-radius: 50%;
    animation: spin 0.6s linear infinite;
    vertical-align: middle;
    margin-right: 0.4rem;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* ---------------------------------------------------------------------------
   21. Footer
   --------------------------------------------------------------------------- */
footer.site-footer {
    border-top: 1px solid var(--rf-border);
    padding: 1.5rem 0;
    margin-top: 3rem;
    text-align: center;
}

footer.site-footer small {
    color: var(--rf-text-muted);
    font-size: 0.75rem;
}

/* ---------------------------------------------------------------------------
   22. Responsive
   --------------------------------------------------------------------------- */
@media (max-width: 768px) {
    .form-row { grid-template-columns: 1fr; }
    .deal-meta-grid { gap: 1rem; }
    .tab-btn { padding: 0.5rem 0.65rem; font-size: 0.8rem; }
    .brand-nav { padding: 0.5rem 1rem; }
}

/* ---------------------------------------------------------------------------
   23. Misc Utilities
   --------------------------------------------------------------------------- */
.muted { color: var(--rf-text-muted); }
.text-gold { color: var(--rf-gold); }
.text-success { color: var(--rf-success); }
.text-warning { color: var(--rf-warning); }
.text-danger { color: var(--rf-danger); }
.text-sm { font-size: 0.8rem; }
.mt-0 { margin-top: 0; }
.mb-0 { margin-bottom: 0; }
.mb-1 { margin-bottom: 0.5rem; }
.mb-2 { margin-bottom: 1rem; }
.gap-sm { gap: 0.5rem; }
.flex { display: flex; }
.flex-between { display: flex; justify-content: space-between; align-items: center; }
.flex-center { display: flex; align-items: center; }
.visually-hidden { position: absolute; width: 1px; height: 1px; overflow: hidden; clip: rect(0,0,0,0); }

/* ---------------------------------------------------------------------------
   24. Binding Agreement Date — Inline Edit Widget
   --------------------------------------------------------------------------- */
.bad-edit-row {
    margin-top: 0.75rem;
    padding-top: 0.75rem;
    border-top: 1px solid var(--rf-border);
    display: flex;
    align-items: center;
    gap: 0.6rem;
    flex-wrap: wrap;
    font-size: 0.85rem;
}

.bad-value {
    color: var(--rf-gold);
    font-weight: 600;
}

.bad-value.bad-not-set {
    color: var(--rf-text-muted);
    font-style: italic;
    font-weight: 400;
}

.bad-edit-btn {
    background: none;
    border: 1px solid var(--rf-border);
    color: var(--rf-text-secondary);
    font-size: 0.85rem;
    padding: 0.15rem 0.5rem;
    border-radius: 4px;
    cursor: pointer;
    transition: color 0.15s, border-color 0.15s;
}

.bad-edit-btn:hover {
    color: var(--rf-gold);
    border-color: var(--rf-gold);
}

.bad-edit-widget {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
}

.bad-edit-widget input[type="date"] {
    background: var(--rf-bg-input);
    border: 1px solid var(--rf-border);
    color: var(--rf-text);
    font-family: var(--rf-font);
    font-size: 0.85rem;
    padding: 0.3rem 0.5rem;
    border-radius: 4px;
    margin: 0;
}

.bad-edit-widget input[type="date"]:focus {
    border-color: var(--rf-border-focus);
    outline: none;
}

.bad-save-btn {
    padding: 0.3rem 0.75rem !important;
    font-size: 0.8rem !important;
    min-width: auto !important;
}

.bad-cancel-btn {
    background: none;
    border: 1px solid var(--rf-border);
    color: var(--rf-text-muted);
    font-size: 0.8rem;
    padding: 0.3rem 0.6rem;
    border-radius: 4px;
    cursor: pointer;
    transition: color 0.15s;
}

.bad-cancel-btn:hover {
    color: var(--rf-text);
}

/* ---------------------------------------------------------------------------
   25. Offset Override — Inline Edit Widget
   --------------------------------------------------------------------------- */
.offset-edit-area {
    display: inline;
    margin-left: 0.3rem;
}

.offset-edit-btn {
    background: none;
    border: 1px solid var(--rf-border);
    color: var(--rf-text-muted);
    font-size: 0.78rem;
    padding: 0.1rem 0.35rem;
    border-radius: 3px;
    cursor: pointer;
    transition: color 0.15s, border-color 0.15s;
    vertical-align: middle;
}

.offset-edit-btn:hover {
    color: var(--rf-gold);
    border-color: var(--rf-gold);
}

.offset-edit-widget {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
    vertical-align: middle;
}

.offset-number-input {
    background: var(--rf-bg-input);
    border: 1px solid var(--rf-border);
    color: var(--rf-text);
    font-family: var(--rf-font);
    font-size: 0.82rem;
    padding: 0.2rem 0.4rem;
    border-radius: 4px;
    width: 60px;
    margin: 0;
    text-align: center;
}

.offset-number-input:focus {
    border-color: var(--rf-border-focus);
    outline: none;
}

.offset-save-btn {
    padding: 0.2rem 0.6rem !important;
    font-size: 0.75rem !important;
    min-width: auto !important;
}

.offset-cancel-btn {
    background: none;
    border: 1px solid var(--rf-border);
    color: var(--rf-text-muted);
    font-size: 0.75rem;
    padding: 0.2rem 0.5rem;
    border-radius: 4px;
    cursor: pointer;
    transition: color 0.15s;
}

.offset-cancel-btn:hover {
    color: var(--rf-text);
}

/* ---------------------------------------------------------------------------
   26. Calendar Grid
   --------------------------------------------------------------------------- */
.calendar-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
}

.calendar-header h3 {
    margin: 0;
}

.ics-export-btn {
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: 0.3rem;
}

.calendar-nav {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 1.5rem;
    margin-bottom: 1.25rem;
}

.calendar-nav-btn {
    background: none;
    border: 1px solid var(--rf-border);
    color: var(--rf-text-secondary);
    font-size: 0.85rem;
    padding: 0.3rem 0.8rem;
    border-radius: var(--rf-radius-sm);
    cursor: pointer;
    font-family: var(--rf-font);
    transition: color 0.15s, border-color 0.15s;
}

.calendar-nav-btn:hover {
    color: var(--rf-gold);
    border-color: var(--rf-gold);
}

.calendar-month-label {
    font-size: 1.05rem;
    font-weight: 600;
    min-width: 160px;
    text-align: center;
}

.calendar-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 1px;
    background: var(--rf-border);
    border: 1px solid var(--rf-border);
    border-radius: var(--rf-radius);
    overflow: hidden;
}

.calendar-dow {
    background: var(--rf-bg-elevated);
    color: var(--rf-text-muted);
    font-size: 0.7rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    padding: 0.5rem;
    text-align: center;
}

.calendar-day {
    background: var(--rf-bg-card);
    min-height: 80px;
    padding: 0.4rem;
    position: relative;
    vertical-align: top;
}

.calendar-day-empty {
    background: var(--rf-bg);
    min-height: 80px;
}

.calendar-day-today {
    background: rgba(210, 181, 108, 0.06);
    box-shadow: inset 0 0 0 1px rgba(210, 181, 108, 0.25);
}

.calendar-day-number {
    font-size: 0.78rem;
    font-weight: 600;
    color: var(--rf-text-secondary);
    margin-bottom: 0.3rem;
}

.calendar-day-today .calendar-day-number {
    color: var(--rf-gold);
}

.calendar-event {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    font-size: 0.68rem;
    padding: 0.1rem 0.25rem;
    border-radius: 3px;
    margin-bottom: 2px;
    line-height: 1.3;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.calendar-event-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    flex-shrink: 0;
}

.calendar-event-deadline .calendar-event-dot { background: var(--rf-danger); }
.calendar-event-milestone .calendar-event-dot { background: var(--rf-gold); }
.calendar-event-info .calendar-event-dot { background: var(--rf-info); }
.calendar-event-conflict .calendar-event-dot { background: var(--rf-danger); }

.calendar-event-deadline { color: var(--rf-danger); }
.calendar-event-milestone { color: var(--rf-gold); }
.calendar-event-info { color: var(--rf-info); }
.calendar-event-conflict { color: var(--rf-danger); }

.calendar-event-label {
    overflow: hidden;
    text-overflow: ellipsis;
}

.calendar-tbd-note {
    margin-top: 1rem;
    font-size: 0.82rem;
    color: var(--rf-text-muted);
    text-align: center;
}

/* Calendar responsive — dots only on mobile */
@media (max-width: 768px) {
    .calendar-day {
        min-height: 50px;
        padding: 0.25rem;
    }
    .calendar-event-label {
        display: none;
    }
    .calendar-event {
        justify-content: center;
        padding: 0.15rem;
    }
    .calendar-month-label {
        font-size: 0.9rem;
        min-width: 120px;
    }
}

/* ---------------------------------------------------------------------------
   27. Google Calendar Links
   --------------------------------------------------------------------------- */
.header-btn-group {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.gcal-all-btn {
    display: inline-flex !important;
    align-items: center;
    gap: 0.35rem;
    text-decoration: none;
    white-space: nowrap;
}

.gcal-icon {
    width: 16px;
    height: 16px;
    vertical-align: middle;
}

/* Per-event GCal link on timeline rows */
.gcal-link {
    display: inline-block;
    font-size: 0.68rem;
    font-weight: 600;
    color: var(--rf-info);
    text-decoration: none;
    padding: 0.1rem 0.3rem;
    border: 1px solid rgba(96, 165, 250, 0.3);
    border-radius: 3px;
    margin-left: 0.4rem;
    transition: color 0.15s, border-color 0.15s, background 0.15s;
    vertical-align: middle;
}

.gcal-link:hover {
    color: #fff;
    background: rgba(96, 165, 250, 0.25);
    border-color: var(--rf-info);
}

/* Per-event GCal link on calendar day cells */
.gcal-link-cal {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 14px;
    height: 14px;
    font-size: 0.65rem;
    font-weight: 700;
    color: var(--rf-info);
    text-decoration: none;
    border-radius: 50%;
    margin-left: auto;
    flex-shrink: 0;
    transition: background 0.15s, color 0.15s;
}

.gcal-link-cal:hover {
    background: rgba(96, 165, 250, 0.3);
    color: #fff;
}

/* ---------------------------------------------------------------------------
   28. Deal Info Cards
   --------------------------------------------------------------------------- */
.deal-info-section-title {
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--rf-gold);
    margin-bottom: 0.75rem;
    padding-bottom: 0.4rem;
    border-bottom: 1px solid var(--rf-border);
}

.deal-info-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 0.75rem;
}

.deal-info-card {
    background: var(--rf-bg-elevated);
    border: 1px solid var(--rf-border);
    border-radius: var(--rf-radius-sm);
    padding: 1rem;
    transition: border-color 0.15s;
}

.deal-info-card:hover {
    border-color: var(--rf-border-light);
}

.deal-info-label {
    font-size: 0.7rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    color: var(--rf-text-muted);
    margin-bottom: 0.35rem;
}

.deal-info-value {
    font-size: 1.15rem;
    font-weight: 600;
    color: var(--rf-gold);
    margin-bottom: 0.5rem;
    word-break: break-word;
}

.deal-info-value-long {
    font-size: 0.92rem;
    font-weight: 400;
    line-height: 1.55;
    color: var(--rf-text);
}

.deal-info-card-wide {
    grid-column: 1 / -1;
}

.deal-info-section-ref {
    font-size: 0.65rem;
    font-weight: 400;
    color: var(--rf-text-muted);
    margin-left: 0.35rem;
    opacity: 0.7;
}

.deal-info-meta {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.78rem;
}

/* Info-style badge (blue) for tab */
.tab-badge-info {
    background: rgba(96, 165, 250, 0.15);
    color: var(--rf-info);
}

@media (max-width: 768px) {
    .deal-info-grid {
        grid-template-columns: 1fr;
    }
}

/* ================================================================
   Deal Archive & Actions
   ================================================================ */

.status-archived {
    background: rgba(157, 157, 165, 0.08);
    color: var(--rf-text-muted);
}

.archive-toggle {
    display: flex;
    justify-content: flex-end;
    margin-bottom: 1rem;
}

.deal-actions-row {
    margin-top: 0.75rem;
    padding-top: 0.75rem;
    border-top: 1px solid var(--rf-border);
    display: flex;
    gap: 0.5rem;
}

.btn-danger-outline {
    border-color: rgba(248, 113, 113, 0.4) !important;
    color: var(--rf-danger) !important;
}

.btn-danger-outline:hover {
    border-color: var(--rf-danger) !important;
    background: rgba(248, 113, 113, 0.1) !important;
}

/* ================================================================
   Manual Entry Form
   ================================================================ */

.manual-section {
    margin-bottom: 1rem;
    border: 1px solid var(--rf-border);
    border-radius: var(--rf-radius);
    overflow: hidden;
}

.manual-section-title {
    padding: 0.75rem 1rem;
    cursor: pointer;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--rf-gold);
    background: var(--rf-bg-card);
    list-style: none;
}

.manual-section-title::-webkit-details-marker {
    display: none;
}

.manual-section-title::before {
    content: "\25B6";
    display: inline-block;
    margin-right: 0.5rem;
    font-size: 0.6rem;
    transition: transform 0.15s;
    vertical-align: middle;
}

.manual-section[open] > .manual-section-title::before {
    transform: rotate(90deg);
}

.manual-section-body {
    padding: 0.75rem 1rem 1rem;
}

.manual-offsets-grid {
    display: flex;
    flex-direction: column;
    gap: 0;
}

.manual-offset-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 1rem;
    padding: 0.5rem 0;
    border-bottom: 1px solid var(--rf-border);
}

.manual-offset-row:last-child {
    border-bottom: none;
}

.manual-offset-label {
    flex: 1;
    font-size: 0.875rem;
    font-weight: 500;
    margin-bottom: 0;
}

.manual-offset-inputs {
    display: flex;
    align-items: center;
    gap: 0.4rem;
    flex-shrink: 0;
}

.offset-number-input {
    width: 80px !important;
    margin-bottom: 0 !important;
    padding: 0.3rem 0.5rem !important;
    font-size: 0.85rem !important;
}

.offset-kind-select {
    background: var(--rf-bg-input);
    border: 1px solid var(--rf-border);
    color: var(--rf-text);
    font-family: var(--rf-font);
    font-size: 0.8rem;
    padding: 0.3rem 0.4rem;
    border-radius: 4px;
    margin-bottom: 0;
}

.offset-kind-select:focus {
    border-color: var(--rf-gold);
    outline: none;
}

@media (max-width: 600px) {
    .manual-offset-row {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.4rem;
    }
}

/* ===========================================================================
   RF-401 Timeline — Additional Styles
   =========================================================================== */

/* Auth Pages */
.auth-container {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 60vh;
}
.auth-card {
    width: 100%;
    max-width: 400px;
}
.auth-header {
    text-align: center;
    margin-bottom: 1.5rem;
}
.auth-logo {
    max-width: 360px;
    width: 100%;
    height: auto;
    border-radius: 12px;
    margin-bottom: 1.5rem;
    filter: drop-shadow(0 4px 24px rgba(212, 175, 55, 0.15));
}
.auth-error {
    color: var(--rf-danger);
    font-size: 0.85rem;
    margin-bottom: 0.75rem;
    padding: 0.5rem;
    border-radius: var(--rf-radius-sm);
    background: rgba(248, 113, 113, 0.1);
}
.auth-submit {
    width: 100%;
}
.auth-footer {
    text-align: center;
    margin-top: 1rem;
    font-size: 0.85rem;
    color: var(--rf-text-secondary);
}

/* Task Toggle Button */
.task-toggle {
    background: none;
    border: none;
    cursor: pointer;
    padding: 0;
    font-size: 1.1rem;
    line-height: 1;
    flex-shrink: 0;
}
.task-check { font-size: 1.1rem; }
.task-check.done { color: var(--rf-success); }
.task-check.doing { color: var(--rf-warning); }
.task-check.todo { color: var(--rf-text-muted); }

/* Gold button (primary action) */
.gold-btn {
    background: var(--rf-gold-gradient);
    color: var(--rf-black);
    font-weight: 600;
    border: none;
    border-radius: var(--rf-radius-sm);
    padding: 0.5rem 1.25rem;
    cursor: pointer;
    font-family: var(--rf-font);
    font-size: 0.875rem;
    transition: filter 0.15s, transform 0.1s;
}
.gold-btn:hover {
    filter: brightness(1.1);
    transform: translateY(-1px);
}
.gold-btn:active {
    transform: translateY(0);
}
.gold-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    filter: none;
    transform: none;
}

/* Secondary button */
.btn-secondary {
    background: var(--rf-bg-elevated);
    color: var(--rf-text-secondary);
    border: 1px solid var(--rf-border);
    border-radius: var(--rf-radius-sm);
    padding: 0.35rem 0.85rem;
    font-size: 0.8rem;
    font-weight: 500;
    cursor: pointer;
    font-family: var(--rf-font);
    transition: border-color 0.15s, color 0.15s;
}
.btn-secondary:hover {
    border-color: var(--rf-gold);
    color: var(--rf-gold);
}

/* Status pills for deals */
.status-pill {
    display: inline-flex;
    align-items: center;
    font-size: 0.7rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    padding: 0.15rem 0.55rem;
    border-radius: 20px;
    line-height: 1.4;
}
.status-active {
    background: rgba(52, 211, 153, 0.12);
    color: var(--rf-success);
}
.status-closed {
    background: rgba(157, 157, 165, 0.12);
    color: var(--rf-text-secondary);
}
.status-cancelled {
    background: rgba(248, 113, 113, 0.12);
    color: var(--rf-danger);
}

/* Create deal section */
.create-deal-section {
    margin-bottom: 1.5rem;
}
.create-deal-section > summary {
    list-style: none;
    cursor: pointer;
    display: inline-block;
}
.create-deal-section > summary::-webkit-details-marker {
    display: none;
}

/* Form label helper */
.form-label {
    font-size: 0.8rem;
    font-weight: 500;
    display: block;
    margin-bottom: 0.25rem;
    color: var(--rf-text-secondary);
}
.required { color: var(--rf-danger); }

/* Text utilities */
.text-secondary { color: var(--rf-text-secondary); }
.text-muted { color: var(--rf-text-muted); }

/* Badge styles */
.badge { font-size: 0.75rem; font-weight: 600; padding: 0.1rem 0.5rem; border-radius: 10px; }
.badge-success { background: rgba(52, 211, 153, 0.15); color: var(--rf-success); }
.badge-muted { background: var(--rf-bg-elevated); color: var(--rf-text-muted); }

/* Tab loading bar */
.tab-loading {
    display: none;
    height: 3px;
    background: var(--rf-gold);
    border-radius: 2px;
    margin-bottom: 1rem;
}

/* Warning badge for tabs */
.tab-badge-warning {
    background: rgba(251, 191, 36, 0.15);
    color: var(--rf-warning);
}
.tab-badge-danger {
    background: rgba(248, 113, 113, 0.15);
    color: var(--rf-danger);
}

/* Event type badge (for timeline table) */
.event-type-badge {
    display: inline-block;
    font-size: 0.7rem;
    font-weight: 600;
    padding: 0.1rem 0.5rem;
    border-radius: 4px;
    text-transform: capitalize;
}

/* Source quote details */
.source-quote-details summary {
    cursor: pointer;
    font-size: 0.75rem;
    color: var(--rf-text-muted);
}
.source-quote-details summary:hover {
    color: var(--rf-gold);
}
.source-page {
    font-size: 0.7rem;
    color: var(--rf-text-muted);
    font-weight: 600;
}

/* Confidence badges */
.confidence-badge {
    font-size: 0.75rem;
    font-weight: 600;
}

/* Deal card link */
.deal-card-link {
    text-decoration: none;
    color: inherit;
    display: block;
}
.deal-card-link:hover {
    color: inherit;
}

/* Deal card address */
.deal-card-address {
    font-size: 0.85rem;
    color: var(--rf-text-secondary);
    margin: 0 0 0.5rem;
}
.deal-card-title {
    margin: 0;
    font-size: 1.05rem;
}

/* Meta items */
.meta-item {
    display: inline-flex;
    align-items: center;
    gap: 0.3rem;
}
.meta-icon { font-size: 0.85rem; }
.meta-warning { color: var(--rf-warning); }
.meta-date { margin-left: auto; }
.meta-tag {
    font-size: 0.825rem;
    color: var(--rf-text-secondary);
}

/* Deal header */
.deal-header-card { margin-bottom: 1.5rem; }
.deal-header-top {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 1rem;
    margin-bottom: 0.5rem;
}
.deal-title {
    margin: 0 0 0.15rem;
    font-size: 1.5rem;
}
.deal-address {
    color: var(--rf-text-secondary);
    margin: 0;
    font-size: 0.9rem;
}
.deal-header-meta {
    display: flex;
    gap: 1.25rem;
    flex-wrap: wrap;
    font-size: 0.85rem;
    margin-bottom: 0.5rem;
}

/* Breadcrumb */
.breadcrumb {
    font-size: 0.85rem;
    color: var(--rf-text-muted);
    margin-bottom: 1rem;
}
.breadcrumb a {
    color: var(--rf-text-secondary);
    text-decoration: none;
}
.breadcrumb a:hover {
    color: var(--rf-gold);
}
.breadcrumb-sep {
    margin: 0 0.4rem;
    color: var(--rf-text-muted);
}

/* Page header */
.page-header {
    margin-bottom: 1.5rem;
}
.page-header h1 {
    margin-bottom: 0.25rem;
}
.page-header p {
    margin: 0;
}

/* Deal list */
.deal-list {
    display: flex;
    flex-direction: column;
    gap: 0;
}

/* Tab section title */
.section-title {
    margin-bottom: 0.75rem;
}
.section-count {
    font-size: 0.8rem;
    font-weight: 400;
    color: var(--rf-text-muted);
    margin-left: 0.5rem;
}
.tab-section {
    margin-bottom: 1rem;
}

/* Task category styles */
.task-category { margin-bottom: 1.25rem; }
.category-title {
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--rf-gold);
    padding: 0.75rem 0 0.4rem;
    border-bottom: 1px solid var(--rf-border);
    margin: 0 0 0;
    display: flex;
    align-items: center;
    gap: 0.35rem;
}
.category-icon { font-size: 1rem; }
.category-count {
    font-size: 0.75rem;
    font-weight: 400;
    color: var(--rf-text-muted);
}
.task-items { }
.task-content { flex: 1; min-width: 0; }
.task-meta {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-top: 0.25rem;
    font-size: 0.8rem;
    flex-wrap: wrap;
}
.adjusted-badge {
    font-size: 0.7rem;
    color: var(--rf-warning);
    background: rgba(251, 191, 36, 0.1);
    padding: 0.05rem 0.35rem;
    border-radius: 3px;
}

/* Timeline table wrap */
.timeline-table-wrap {
    overflow-x: auto;
}
.timeline-table {
    width: 100%;
    border-collapse: collapse;
}

/* Inline source for tasks */
.inline-source {
    display: inline;
}

/* Conflict styles */
.conflict-icon { margin-right: 0.25rem; }
.conflict-desc {
    font-size: 0.8rem;
    color: var(--rf-danger);
    margin-top: 0.2rem;
}

